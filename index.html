<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Set List using JSON</title>
<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous">

function loadFile(){
    request = new XMLHttpRequest();
    console.log("1");
    request.open("GET, ajax/songs.json");
    console.log("2");
    request.onreadystatechange = function (){
        console.log("3");
        if (request.readyState == 4 && request.status == 200){
            result = request.responseText;
            songs = JSON.parse(result);

            strHTML = "<ul>";
            songs.array.forEach(function(song) {
                strHTML += "<li>" + "name: " + song.name + " , album: " + song.album + "<li>";
            });
            strHTML = "<ul>";
            document.getElementById("data").innerHTML = strHTML;

            
        } else if (request.readState == 4 && request.status != 200){
            document.getElementById("data").innerHTML = "Something is wrong!  Check the logs to see where this went off the rails";
        } else if (request.readyState == 3) {
            document.getElementById("data").innerHTML = "Too soon!  Try again";
        }
    }

    request.send();
    console.log("4");
}

</script>
</head>

<body onload = "loadFile()">

    <h1> hello </h1>
    <div id="data">Loading...</div>

    <script language="javascript">
    
    $(function(){
        var song = [];
    
        $.getJSON( "songs.json", function( data ) {
            $.each(data.song, function (i,s){
                var tableRow = "<tr>" + "<td>" + s.name + "</td>" + "<td>" + s.album
                + "</td>" + "<td>" + s.artist + "</td>" + "<td>" + s.genre 
                + "</td>" + "<td>" + s.year + "</td>" + "</tr>"
                $(tableRow).appendTo("#data tbody");
            });
            // str = JSON.stringify(data);
            // document.write(str);
            // strHTML= "";
        });

    });

    </script>

    <div class="wrapper">
        <div class="profile">
            <table id= "data" border="2">
            <thead>
                    <th>Song Name</th>
                    <th>Album</th>
                    <th>Artist</th>
                    <th>Genre</th>
                    <th>year</th>
            </thead>
                <tbody>
        
                </tbody>
           </table>
        
        </div>
    </div>

</body>

</html>